import{s as O,e as $,a as x,c as k,h as g,g as C,b as S,d as m,j as T,i as d,k as h,o as V,t as y,f as w,l as j}from"../chunks/scheduler.hpYd8Nb6.js";import{S as q,i as J,b as v,e as M,t as b,g as N,c as D,a as P,m as E,d as I}from"../chunks/index.D6TauPwI.js";import{B as A,D as B}from"../chunks/Draw.2QjGL7Aq.js";function H(f){let t,n="All done!",i,l,a;return l=new A({props:{"data-sveltekit-reload":!0,href:"/training",$$slots:{default:[z]},$$scope:{ctx:f}}}),{c(){t=$("div"),t.textContent=n,i=x(),D(l.$$.fragment)},l(e){t=k(e,"DIV",{"data-svelte-h":!0}),C(t)!=="svelte-u554xm"&&(t.textContent=n),i=S(e),P(l.$$.fragment,e)},m(e,s){d(e,t,s),d(e,i,s),E(l,e,s),a=!0},p(e,s){const o={};s&512&&(o.$$scope={dirty:s,ctx:e}),l.$set(o)},i(e){a||(b(l.$$.fragment,e),a=!0)},o(e){v(l.$$.fragment,e),a=!1},d(e){e&&(m(t),m(i)),I(l,e)}}}function L(f){let t,n,i,l,a,e,s;return e=new B({props:{pokemonJSON:f[0]}}),e.$on("canvasSubmit",f[4]),{c(){t=$("div"),n=$("p"),i=y(f[2]),l=y("/10"),a=x(),D(e.$$.fragment),this.h()},l(o){t=k(o,"DIV",{class:!0});var r=g(t);n=k(r,"P",{});var p=g(n);i=w(p,f[2]),l=w(p,"/10"),p.forEach(m),r.forEach(m),a=S(o),P(e.$$.fragment,o),this.h()},h(){T(t,"class","text-poke_red-500 flex justify-center align-center")},m(o,r){d(o,t,r),h(t,n),h(n,i),h(n,l),d(o,a,r),E(e,o,r),s=!0},p(o,r){(!s||r&4)&&j(i,o[2]);const p={};r&1&&(p.pokemonJSON=o[0]),e.$set(p)},i(o){s||(b(e.$$.fragment,o),s=!0)},o(o){v(e.$$.fragment,o),s=!1},d(o){o&&(m(t),m(a)),I(e,o)}}}function z(f){let t;return{c(){t=y("Train again")},l(n){t=w(n,"Train again")},m(n,i){d(n,t,i)},d(n){n&&m(t)}}}function R(f){let t,n,i="<h2>Training</h2>",l,a,e,s;const o=[L,H],r=[];function p(u,c){return u[1]<30?0:1}return a=p(f),e=r[a]=o[a](f),{c(){t=$("div"),n=$("div"),n.innerHTML=i,l=x(),e.c(),this.h()},l(u){t=k(u,"DIV",{});var c=g(t);n=k(c,"DIV",{class:!0,"data-svelte-h":!0}),C(n)!=="svelte-11y15az"&&(n.innerHTML=i),l=S(c),e.l(c),c.forEach(m),this.h()},h(){T(n,"class","w-full flex items-center flex-col")},m(u,c){d(u,t,c),h(t,n),h(t,l),r[a].m(t,null),s=!0},p(u,[c]){let _=a;a=p(u),a===_?r[a].p(u,c):(N(),v(r[_],1,1,()=>{r[_]=null}),M(),e=r[a],e?e.p(u,c):(e=r[a]=o[a](u),e.c()),b(e,1),e.m(t,null))},i(u){s||(b(e),s=!0)},o(u){v(e),s=!1},d(u){u&&m(t),r[a].d()}}}function U(f,t,n){const i=["bulbasaur","charmander","squirtle"];let l=i[0],a,e=0,s=1;const o=async()=>{n(1,e++,e),n(2,s++,s),e==10&&(n(2,s=1),l=i[1],r()),e==20&&(n(2,s=1),l=i[2],r())},r=async()=>{const c=await fetch(`https://pokeapi.co/api/v2/pokemon/${l}`);n(0,a=await c.json())},p=async c=>{const _=await fetch("/training",{method:"POST",body:c,headers:{"Content-Type":"image/png",pokemon:l}});if(_.ok)o();else throw new Error(`Unable to upload! ${_.status}: ${_.statusText}`)};return V(async()=>{r()}),[a,e,s,p,c=>p(c.detail.blob)]}class Q extends q{constructor(t){super(),J(this,t,U,R,O,{})}}export{Q as component};
